---
name: gitlab-init
description: Initialize GitLab workflow with interactive environment setup
version: 1.0.0
updated: 2026-01-27
---

# GitLab Workflow Initialization

Initialize GitLab workflow environment with interactive prompts for setting up .env configuration file.

## Usage

```bash
/gitlab-init
```

## What This Command Does

Guides you through an interactive setup process to create `.claude/.env.gitlab-workflow` configuration file with all required GitLab credentials and settings.

### Setup Steps

1. **Check Existing Configuration**
   - Detects if `.claude/.env.gitlab-workflow` already exists
   - Offers to backup or overwrite existing configuration

2. **Collect Required Information**
   - GitLab instance URL
   - Personal Access Token (with 'api' scope)
   - Project ID or path (format: namespace/project-name)

3. **Collect Optional Settings**
   - Git remote name (default: auto-detect)
   - Issue directory path (default: docs/requirements)
   - Base branch name (default: main)

4. **Create Configuration File**
   - Generates `.claude/.env.gitlab-workflow`
   - Sets appropriate file permissions (600)
   - Creates .claude directory if needed

5. **Validate Setup**
   - Automatically runs `/gitlab-doctor` to verify configuration
   - Displays setup status and next steps

## Command Execution

```bash
${CLAUDE_PLUGIN_ROOT}/shared/scripts/gitlab_workflow.py init
```

The command will:
- Create or update `.claude/.env.gitlab-workflow`
- Set secure file permissions
- Validate the configuration
- Provide next steps

## Example Interaction

```
ğŸš€ GitLab Workflow Initialization

This will help you set up GitLab workflow environment.

ğŸ“‹ Required Configuration
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. GitLab URL (e.g., https://gitlab.com or http://192.168.210.103:90)
   > http://192.168.210.103:90

2. GitLab Personal Access Token
   Get from: GitLab â†’ Settings â†’ Access Tokens (scope: 'api')
   > glpat-xxxxxxxxxxxxxxxxxxxx

3. GitLab Project (format: namespace/project-name)
   > withvtm_2.0/withvtm-fe

âš™ï¸  Optional Configuration (press Enter for defaults)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

4. Git Remote Name [default: auto-detect]
   > gitlab

5. Issue Directory [default: docs/requirements]
   > docs/requirements

6. Base Branch [default: main]
   > main

âœ… Configuration saved to: .claude/.env.gitlab-workflow

ğŸ” Validating configuration...

ğŸ¥ Running GitLab Workflow Doctor...
   âœ… All checks passed!

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ¨ Setup Complete!

Next Steps:
  1. Try: /gitlab-doctor         # Verify setup anytime
  2. Try: /gitlab-issue-create   # Create first issue
  3. Read: plugins/gitlab-collaboration/README.md
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

## When to Run

- **First-time setup** - Initial configuration
- **New environment** - Moving to different machine
- **Configuration update** - Change credentials or settings
- **Token rotation** - Update expired tokens
- **Project switch** - Work on different project

## Configuration File

Creates `.claude/.env.gitlab-workflow`:

```bash
# GitLab Workflow Environment Configuration
# Generated by: /gitlab-init on 2026-01-27

# Required - GitLab instance URL
GITLAB_URL=http://192.168.210.103:90

# Required - Personal Access Token (must have 'api' scope)
# Get from: GitLab â†’ Settings â†’ Access Tokens
GITLAB_TOKEN=glpat-xxxxxxxxxxxxxxxxxxxx

# Required - Project ID or path (format: namespace/project-name)
GITLAB_PROJECT=withvtm_2.0/withvtm-fe

# Optional - Git remote name (default: auto-detect from 'gitlab' or 'origin')
GITLAB_REMOTE=gitlab

# Optional - Directory to save issue.json files (default: docs/requirements)
ISSUE_DIR=docs/requirements

# Optional - Base branch for creating new branches (default: main)
BASE_BRANCH=main
```

## Security

- Configuration file is created with **600 permissions** (owner read/write only)
- Token is stored locally and never transmitted except to GitLab API
- `.env.gitlab-workflow` should be added to `.gitignore`
- Backup existing configuration before overwrite

## Getting Personal Access Token

1. Go to GitLab instance
2. Navigate to: **Settings** â†’ **Access Tokens**
3. Click: **Add new token**
4. Set:
   - **Name**: `claude-gitlab-workflow`
   - **Scopes**: âœ… `api` (full API access)
   - **Expiration**: Set as needed
5. Click: **Create personal access token**
6. Copy token (shown only once!)
7. Use in `/gitlab-init`

## Troubleshooting

### .claude directory doesn't exist
The command will automatically create it.

### Permission denied
```bash
chmod 700 .claude
chmod 600 .claude/.env.gitlab-workflow
```

### Want to use example file
```bash
cp plugins/gitlab-collaboration/.env.gitlab-workflow.example .claude/.env.gitlab-workflow
# Then edit: .claude/.env.gitlab-workflow
```

### Want to reset configuration
```bash
rm .claude/.env.gitlab-workflow
/gitlab-init
```

## Related Commands

- `/gitlab-doctor` - Validate configuration (auto-runs after init)
- `/gitlab-issue-create` - Create new issue and branch
- `/gitlab-issue-update` - Update issue from commits
- `/gitlab-mr` - Create merge request

## See Also

For detailed documentation:
- Skill version: `../skills/gitlab-init/SKILL.md`
- Quick reference: `../shared/references/QUICK_REFERENCE.md`
- Example config: `../.env.gitlab-workflow.example`
